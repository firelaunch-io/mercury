# Use the official Rust image as the base image
FROM rust:1.80-bookworm

# Set the working directory in the container
WORKDIR /usr/src/app

# Copy only the necessary files
COPY Cargo.lock Cargo.toml ./
COPY apps/starship-rs ./apps/starship-rs

# Change to the starship-rs directory
WORKDIR /usr/src/app/apps/starship-rs

# Build the starship-rs application
RUN cargo build --release

# Change back to the main workspace directory
WORKDIR /usr/src/app

# Wait for commands
CMD ["tail", "-f", "/dev/null"]